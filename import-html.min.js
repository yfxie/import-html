var IncludeHTML=function(){"use strict";var n=/include(\s+([^\s]+))+/,t=document.documentElement;function r(e,n){var t=this;t.prevPromise=n,t.fn=e,t.resolved=!1,t.result=void 0,t.then=function(e){return t.next=new r(e,t),t.resolved&&t.next._run(t.result),t.next},t._run=function(e){var n=t.fn(e);n instanceof r?n.then(t._resolve):t._resolve(n)},t._resolve=function(e){t.resolved=!0,t.result=e,t.next&&t.next._run(e)},t.prevPromise||t.fn(t._resolve)}r.all=function(u){return new r(function(o){var r=[];u.forEach(function(e,t){e.then(function(e){var n;n=e,r[t]=n,r.length===u.length&&o(r)})})})};var u=function(e){this.node=e,this.parentNode=e.parentNode,this.options=u.extractOptions(e)};return u.prototype.load=function(){var t,o=this;return(t=this.options.url,new r(function(e){var n=new XMLHttpRequest;n.onload=function(){e(this.response)},n.open("get",t,!0),n.send()})).then(function(e){var n=document.createElement("template");return n.innerHTML=e,o.parentNode.replaceChild(n.content,o.node),n})},u.nodeValidator=function(e){return n.exec(e.nodeValue)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},u.extractOptions=function(e){var n=e.nodeValue.replace(/^\s+include\s+/,"").replace(/\s+/g," ").split(" ");return{url:n.shift(),directives:n}},u.queryNodes=function(e){for(var n,t=[],o=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,u.nodeValidator);n=o.nextNode();)t.push(n);return t},u.load=function(e){e=e instanceof HTMLElement?e:t;var n=u.queryNodes(e).map(function(e){return new u(e).load()});if(n.length)return r.all(n).then(u.load);document.documentElement.classList.add("include-html-loaded")},document.addEventListener("DOMContentLoaded",u.load),u}();"undefined"!=typeof module&&(module.exports=IncludeHTML);