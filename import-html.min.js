/*!
* 
*   import-html.js v1.0.1
*   https://github.com/yfxie/import-html#readme
* 
*   (c) 2018 YI FENG XIE <yfxie@me.com>
*   Licensed under the MIT license
* 
*/var ImportHTML=function(){"use strict";var n=/import(\s+([^\s]+))+/,t=document.documentElement;function r(e,n){var t=this;t.prevPromise=n,t.fn=e,t.resolved=!1,t.result=void 0,t.then=function(e){return t.next=new r(e,t),t.resolved&&t.next._run(t.result),t.next},t._run=function(e){var n=t.fn(e);n instanceof r?n.then(t._resolve):t._resolve(n)},t._resolve=function(e){t.resolved=!0,t.result=e,t.next&&t.next._run(e)},t.prevPromise||t.fn(t._resolve)}r.all=function(i){return new r(function(o){var r=[];i.forEach(function(e,t){e.then(function(e){var n;n=e,r[t]=n,r.length===i.length&&o(r)})})})};var i=function(e){this.node=e,this.parentNode=e.parentNode,this.options=i.extractOptions(e)};return i.prototype.load=function(){var t,o=this;return(t=this.options.url,new r(function(e){var n=new XMLHttpRequest;n.onload=function(){e(this.response)},n.open("get",t,!0),n.send()})).then(function(e){var n=document.createElement("template");return n.innerHTML=e,o.parentNode.replaceChild(n.content,o.node),n})},i.nodeValidator=function(e){return n.exec(e.nodeValue)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},i.extractOptions=function(e){var n=e.nodeValue.replace(/^\s+import\s+/,"").replace(/\s+/g," ").split(" ");return{url:n.shift(),directives:n}},i.queryNodes=function(e){for(var n,t=[],o=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,i.nodeValidator);n=o.nextNode();)t.push(n);return t},i.load=function(e){e=e instanceof HTMLElement?e:t;var n=i.queryNodes(e).map(function(e){return new i(e).load()});if(n.length)return r.all(n).then(i.load);document.documentElement.classList.add("import-html-loaded")},document.addEventListener("DOMContentLoaded",i.load),i}();"undefined"!=typeof module&&(module.exports=ImportHTML);